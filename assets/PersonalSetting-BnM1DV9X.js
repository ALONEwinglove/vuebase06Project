import{_ as b}from"./PageContainer-BlVx7A_z.js";import{q as E,s as m,ab as V,v as x,g as y,w as t,x as F,o as P,y as o,C as i,c9 as U,E as R}from"./index-WoyIul4F.js";import{E as S,a as k}from"./el-form-item-D8vPdmQD.js";import{E as q}from"./el-button-DaCrz87C.js";import{E as C}from"./el-input-BpGBKpNT.js";import"./_baseClone-DUpN-TY9.js";const N={__name:"PersonalSetting",setup(B){const r=m({old_pwd:"",new_pwd:"",re_pwd:""}),w=V({old_pwd:[{required:!0,message:"原密码不能为空",trigger:"blur"},{min:6,max:15,message:"密码长度必须为6到15位",trigger:"blur"}],new_pwd:[{required:!0,message:"新密码不能为空",trigger:"blur"},{min:6,max:15,message:"密码长度必须为6到15位",trigger:"blur"},{validator:(n,e,l)=>{e===r.value.old_pwd?l(new Error("原密码和新密码不能相同")):l()},trigger:"blur"}],re_pwd:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{min:6,max:15,message:"密码长度必须为6到15位",trigger:"blur"},{validator:(n,e,l)=>{e!==r.value.new_pwd?l(new Error("新密码和确认密码必须相同")):l()},trigger:"blur"}]}),d=m(null),u=x(),_=F(),g=async()=>{await d.value.validate(),await U(r.value),R.success("密码修改成功"),u.setToken(""),u.setUser({}),_.push("/login")},f=()=>{d.value.resetFields()};return(n,e)=>{const l=C,s=k,p=q,v=S,c=b;return P(),y(c,{title:"重置密码"},{default:t(()=>[o(v,{ref_key:"pwdFormRef",ref:d,model:r.value,rules:w,"label-width":"100px",class:"demo-form"},{default:t(()=>[o(s,{label:"原密码",prop:"old_pwd"},{default:t(()=>[o(l,{modelValue:r.value.old_pwd,"onUpdate:modelValue":e[0]||(e[0]=a=>r.value.old_pwd=a),type:"password",placeholder:"请输入原密码","show-password":""},null,8,["modelValue"])]),_:1}),o(s,{label:"新密码",prop:"new_pwd"},{default:t(()=>[o(l,{modelValue:r.value.new_pwd,"onUpdate:modelValue":e[1]||(e[1]=a=>r.value.new_pwd=a),type:"password",placeholder:"请输入新密码","show-password":""},null,8,["modelValue"])]),_:1}),o(s,{label:"确认密码",prop:"re_pwd"},{default:t(()=>[o(l,{modelValue:r.value.re_pwd,"onUpdate:modelValue":e[2]||(e[2]=a=>r.value.re_pwd=a),type:"password",placeholder:"请确认新密码","show-password":""},null,8,["modelValue"])]),_:1}),o(s,null,{default:t(()=>[o(p,{type:"primary",onClick:g},{default:t(()=>e[3]||(e[3]=[i("修改密码")])),_:1}),o(p,{onClick:f},{default:t(()=>e[4]||(e[4]=[i("重置")])),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})}}},G=E(N,[["__scopeId","data-v-5a1f4e42"]]);export{G as default};
