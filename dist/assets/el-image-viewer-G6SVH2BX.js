import{b7 as lt,aF as ue,e as Le,b as ae,d as w,m as ge,_ as re,a as H,aB as ze,bP as it,bQ as ut,a2 as Pe,u as se,bk as ct,s as V,bR as dt,aM as ke,c as $,t as ye,Q as Ke,g as X,o as v,w as E,y as L,T as ft,z as F,n as Z,h as p,j as e,$ as k,K as R,r as P,a5 as oe,L as j,aL as Ie,a6 as he,b3 as pt,aa as vt,C as mt,al as de,bS as gt,bT as Ye,k as We,bU as yt,bV as ht,aX as Ze,ad as bt,ae as kt,V as ce,bW as wt,Z as ie,a4 as Ge,l as $e,bX as $t,bF as Ct,ag as Fe,M as we,X as Be,Y as De,aJ as Et,I as Re,bY as St,bZ as Lt,b_ as Je,aU as Rt,b$ as Qe,ax as xe,aj as et,bB as M,ay as tt,c0 as Tt,aw as Pt,c1 as It,i as Ft,aS as Ue,c2 as Ot,c3 as _t,R as Nt,p as zt,S as Bt,a0 as Ae}from"./index-WoyIul4F.js";import{E as Dt,a as Ut,c as At}from"./index-5zdbyFxH.js";import{d as Mt}from"./debounce-y70csgXi.js";import{j as jt,t as Oe,f as Ce,e as Vt}from"./el-button-DaCrz87C.js";import{l as Xt}from"./_baseClone-DUpN-TY9.js";import{i as Ht}from"./el-message-BZQUUPUT.js";var qt=1,Kt=4;function Me(a){return Xt(a,qt|Kt)}var Yt="Expected a function";function Se(a,o,s){var r=!0,i=!0;if(typeof a!="function")throw new TypeError(Yt);return lt(s)&&(r="leading"in s?!!s.leading:r,i="trailing"in s?!!s.trailing:i),Mt(a,o,{leading:r,maxWait:o,trailing:i})}const Wt=(a,o)=>{if(!ue||!a||!o)return!1;const s=a.getBoundingClientRect();let r;return o instanceof Element?r=o.getBoundingClientRect():r={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},s.top<r.bottom&&s.bottom>r.top&&s.right>r.left&&s.left<r.right},Zt=ae({urlList:{type:w(Array),default:()=>ge([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:{type:Boolean,default:!1},crossorigin:{type:w(String)}}),Gt={close:()=>!0,switch:a=>Le(a),rotate:a=>Le(a)},Jt=H({name:"ElImageViewer"}),Qt=H({...Jt,props:Zt,emits:Gt,setup(a,{expose:o,emit:s}){var r;const i=a,f={CONTAIN:{name:"contain",icon:ze(ut)},ORIGINAL:{name:"original",icon:ze(it)}},{t:g}=Pe(),h=se("image-viewer"),{nextZIndex:C}=ct(),O=V(),_=V([]),b=dt(),T=V(!0),n=V(i.initialIndex),u=ke(f.CONTAIN),t=V({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),y=V((r=i.zIndex)!=null?r:C()),c=$(()=>{const{urlList:m}=i;return m.length<=1}),I=$(()=>n.value===0),l=$(()=>n.value===i.urlList.length-1),S=$(()=>i.urlList[n.value]),A=$(()=>[h.e("btn"),h.e("prev"),h.is("disabled",!i.infinite&&I.value)]),B=$(()=>[h.e("btn"),h.e("next"),h.is("disabled",!i.infinite&&l.value)]),D=$(()=>{const{scale:m,deg:U,offsetX:N,offsetY:K,enableTransition:Y}=t.value;let W=N/m,te=K/m;const me=U*Math.PI/180,_e=Math.cos(me),Ne=Math.sin(me);W=W*_e+te*Ne,te=te*_e-N/m*Ne;const Ee={transform:`scale(${m}) rotate(${U}deg) translate(${W}px, ${te}px)`,transition:Y?"transform .3s":""};return u.value.name===f.CONTAIN.name&&(Ee.maxWidth=Ee.maxHeight="100%"),Ee}),ne=$(()=>`${n.value+1} / ${i.urlList.length}`);function G(){J(),s("close")}function fe(){const m=Se(N=>{switch(N.code){case ie.esc:i.closeOnPressEscape&&G();break;case ie.space:le();break;case ie.left:ve();break;case ie.up:z("zoomIn");break;case ie.right:d();break;case ie.down:z("zoomOut");break}}),U=Se(N=>{const K=N.deltaY||N.deltaX;z(K<0?"zoomIn":"zoomOut",{zoomRate:i.zoomRate,enableTransition:!1})});b.run(()=>{ce(document,"keydown",m),ce(document,"wheel",U)})}function J(){b.stop()}function Q(){T.value=!1}function x(m){T.value=!1,m.target.alt=g("el.image.error")}function q(m){if(T.value||m.button!==0||!O.value)return;t.value.enableTransition=!1;const{offsetX:U,offsetY:N}=t.value,K=m.pageX,Y=m.pageY,W=Se(me=>{t.value={...t.value,offsetX:U+me.pageX-K,offsetY:N+me.pageY-Y}}),te=ce(document,"mousemove",W);ce(document,"mouseup",()=>{te()}),m.preventDefault()}function be(){t.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function le(){if(T.value)return;const m=wt(f),U=Object.values(f),N=u.value.name,Y=(U.findIndex(W=>W.name===N)+1)%m.length;u.value=f[m[Y]],be()}function pe(m){const U=i.urlList.length;n.value=(m+U)%U}function ve(){I.value&&!i.infinite||pe(n.value-1)}function d(){l.value&&!i.infinite||pe(n.value+1)}function z(m,U={}){if(T.value)return;const{minScale:N,maxScale:K}=i,{zoomRate:Y,rotateDeg:W,enableTransition:te}={zoomRate:i.zoomRate,rotateDeg:90,enableTransition:!0,...U};switch(m){case"zoomOut":t.value.scale>N&&(t.value.scale=Number.parseFloat((t.value.scale/Y).toFixed(3)));break;case"zoomIn":t.value.scale<K&&(t.value.scale=Number.parseFloat((t.value.scale*Y).toFixed(3)));break;case"clockwise":t.value.deg+=W,s("rotate",t.value.deg);break;case"anticlockwise":t.value.deg-=W,s("rotate",t.value.deg);break}t.value.enableTransition=te}function ee(m){var U;((U=m.detail)==null?void 0:U.focusReason)==="pointer"&&m.preventDefault()}function rt(){i.closeOnPressEscape&&G()}return ye(S,()=>{Ge(()=>{const m=_.value[0];m!=null&&m.complete||(T.value=!0)})}),ye(n,m=>{be(),s("switch",m)}),Ke(()=>{fe()}),o({setActiveItem:pe}),(m,U)=>(v(),X(e(Ut),{to:"body",disabled:!m.teleported},{default:E(()=>[L(ft,{name:"viewer-fade",appear:""},{default:E(()=>[F("div",{ref_key:"wrapper",ref:O,tabindex:-1,class:p(e(h).e("wrapper")),style:Z({zIndex:y.value})},[L(e(Dt),{loop:"",trapped:"","focus-trap-el":O.value,"focus-start-el":"container",onFocusoutPrevented:ee,onReleaseRequested:rt},{default:E(()=>[F("div",{class:p(e(h).e("mask")),onClick:oe(N=>m.hideOnClickModal&&G(),["self"])},null,10,["onClick"]),k(" CLOSE "),F("span",{class:p([e(h).e("btn"),e(h).e("close")]),onClick:G},[L(e(j),null,{default:E(()=>[L(e(Ie))]),_:1})],2),k(" ARROW "),e(c)?k("v-if",!0):(v(),R(he,{key:0},[F("span",{class:p(e(A)),onClick:ve},[L(e(j),null,{default:E(()=>[L(e(pt))]),_:1})],2),F("span",{class:p(e(B)),onClick:d},[L(e(j),null,{default:E(()=>[L(e(vt))]),_:1})],2)],64)),m.showProgress?(v(),R("div",{key:1,class:p([e(h).e("btn"),e(h).e("progress")])},[P(m.$slots,"progress",{activeIndex:n.value,total:m.urlList.length},()=>[mt(de(e(ne)),1)])],2)):k("v-if",!0),k(" ACTIONS "),F("div",{class:p([e(h).e("btn"),e(h).e("actions")])},[F("div",{class:p(e(h).e("actions__inner"))},[P(m.$slots,"toolbar",{actions:z,prev:ve,next:d,reset:le,activeIndex:n.value},()=>[L(e(j),{onClick:N=>z("zoomOut")},{default:E(()=>[L(e(gt))]),_:1},8,["onClick"]),L(e(j),{onClick:N=>z("zoomIn")},{default:E(()=>[L(e(Ye))]),_:1},8,["onClick"]),F("i",{class:p(e(h).e("actions__divider"))},null,2),L(e(j),{onClick:le},{default:E(()=>[(v(),X(We(e(u).icon)))]),_:1}),F("i",{class:p(e(h).e("actions__divider"))},null,2),L(e(j),{onClick:N=>z("anticlockwise")},{default:E(()=>[L(e(yt))]),_:1},8,["onClick"]),L(e(j),{onClick:N=>z("clockwise")},{default:E(()=>[L(e(ht))]),_:1},8,["onClick"])])],2)],2),k(" CANVAS "),F("div",{class:p(e(h).e("canvas"))},[(v(!0),R(he,null,Ze(m.urlList,(N,K)=>bt((v(),R("img",{ref_for:!0,ref:Y=>_.value[K]=Y,key:N,src:N,style:Z(e(D)),class:p(e(h).e("img")),crossorigin:m.crossorigin,onLoad:Q,onError:x,onMousedown:q},null,46,["src","crossorigin"])),[[kt,K===n.value]])),128))],2),P(m.$slots,"default")]),_:3},8,["focus-trap-el"])],6)]),_:3})]),_:3},8,["disabled"]))}});var xt=re(Qt,[["__file","image-viewer.vue"]]);const es=$e(xt),ts=ae({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:w([String,Object])},previewSrcList:{type:w(Array),default:()=>ge([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2},minScale:{type:Number,default:.2},maxScale:{type:Number,default:7},showProgress:{type:Boolean,default:!1},crossorigin:{type:w(String)}}),ss={load:a=>a instanceof Event,error:a=>a instanceof Event,switch:a=>Le(a),close:()=>!0,show:()=>!0},as=H({name:"ElImage",inheritAttrs:!1}),ns=H({...as,props:ts,emits:ss,setup(a,{expose:o,emit:s}){const r=a;let i="";const{t:f}=Pe(),g=se("image"),h=$t(),C=$(()=>Ct(Object.entries(h).filter(([d])=>/^(data-|on[A-Z])/i.test(d)||["id","style"].includes(d)))),O=jt({excludeListeners:!0,excludeKeys:$(()=>Object.keys(C.value))}),_=V(),b=V(!1),T=V(!0),n=V(!1),u=V(),t=V(),y=ue&&"loading"in HTMLImageElement.prototype;let c,I;const l=$(()=>[g.e("inner"),A.value&&g.e("preview"),T.value&&g.is("loading")]),S=$(()=>{const{fit:d}=r;return ue&&d?{objectFit:d}:{}}),A=$(()=>{const{previewSrcList:d}=r;return Fe(d)&&d.length>0}),B=$(()=>{const{previewSrcList:d,initialIndex:z}=r;let ee=z;return z>d.length-1&&(ee=0),ee}),D=$(()=>r.loading==="eager"?!1:!y&&r.loading==="lazy"||r.lazy),ne=()=>{ue&&(T.value=!0,b.value=!1,_.value=r.src)};function G(d){T.value=!1,b.value=!1,s("load",d)}function fe(d){T.value=!1,b.value=!0,s("error",d)}function J(){Wt(u.value,t.value)&&(ne(),q())}const Q=St(J,200,!0);async function x(){var d;if(!ue)return;await Ge();const{scrollContainer:z}=r;Et(z)?t.value=z:Re(z)&&z!==""?t.value=(d=document.querySelector(z))!=null?d:void 0:u.value&&(t.value=At(u.value)),t.value&&(c=ce(t,"scroll",Q),setTimeout(()=>J(),100))}function q(){!ue||!t.value||!Q||(c==null||c(),t.value=void 0)}function be(d){if(d.ctrlKey){if(d.deltaY<0)return d.preventDefault(),!1;if(d.deltaY>0)return d.preventDefault(),!1}}function le(){A.value&&(I=ce("wheel",be,{passive:!1}),i=document.body.style.overflow,document.body.style.overflow="hidden",n.value=!0,s("show"))}function pe(){I==null||I(),document.body.style.overflow=i,n.value=!1,s("close")}function ve(d){s("switch",d)}return ye(()=>r.src,()=>{D.value?(T.value=!0,b.value=!1,q(),x()):ne()}),Ke(()=>{D.value?x():ne()}),o({showPreview:le}),(d,z)=>(v(),R("div",we({ref_key:"container",ref:u},e(C),{class:[e(g).b(),d.$attrs.class]}),[b.value?P(d.$slots,"error",{key:0},()=>[F("div",{class:p(e(g).e("error"))},de(e(f)("el.image.error")),3)]):(v(),R(he,{key:1},[_.value!==void 0?(v(),R("img",we({key:0},e(O),{src:_.value,loading:d.loading,style:e(S),class:e(l),crossorigin:d.crossorigin,onClick:le,onLoad:G,onError:fe}),null,16,["src","loading","crossorigin"])):k("v-if",!0),T.value?(v(),R("div",{key:1,class:p(e(g).e("wrapper"))},[P(d.$slots,"placeholder",{},()=>[F("div",{class:p(e(g).e("placeholder"))},null,2)])],2)):k("v-if",!0)],64)),e(A)?(v(),R(he,{key:2},[n.value?(v(),X(e(es),{key:0,"z-index":d.zIndex,"initial-index":e(B),infinite:d.infinite,"zoom-rate":d.zoomRate,"min-scale":d.minScale,"max-scale":d.maxScale,"show-progress":d.showProgress,"url-list":d.previewSrcList,crossorigin:d.crossorigin,"hide-on-click-modal":d.hideOnClickModal,teleported:d.previewTeleported,"close-on-press-escape":d.closeOnPressEscape,onClose:pe,onSwitch:ve},{progress:E(ee=>[P(d.$slots,"progress",Be(De(ee)))]),toolbar:E(ee=>[P(d.$slots,"toolbar",Be(De(ee)))]),default:E(()=>[d.$slots.viewer?(v(),R("div",{key:0},[P(d.$slots,"viewer")])):k("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","min-scale","max-scale","show-progress","url-list","crossorigin","hide-on-click-modal","teleported","close-on-press-escape"])):k("v-if",!0)],64)):k("v-if",!0)],16))}});var os=re(ns,[["__file","image.vue"]]);const As=$e(os),rs=ae({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:a=>a>=0&&a<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:w(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:w([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:w(Function),default:a=>`${a}%`}}),ls=H({name:"ElProgress"}),is=H({...ls,props:rs,setup(a){const o=a,s={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},r=se("progress"),i=$(()=>{const l={width:`${o.percentage}%`,animationDuration:`${o.duration}s`},S=I(o.percentage);return S.includes("gradient")?l.background=S:l.backgroundColor=S,l}),f=$(()=>(o.strokeWidth/o.width*100).toFixed(1)),g=$(()=>["circle","dashboard"].includes(o.type)?Number.parseInt(`${50-Number.parseFloat(f.value)/2}`,10):0),h=$(()=>{const l=g.value,S=o.type==="dashboard";return`
          M 50 50
          m 0 ${S?"":"-"}${l}
          a ${l} ${l} 0 1 1 0 ${S?"-":""}${l*2}
          a ${l} ${l} 0 1 1 0 ${S?"":"-"}${l*2}
          `}),C=$(()=>2*Math.PI*g.value),O=$(()=>o.type==="dashboard"?.75:1),_=$(()=>`${-1*C.value*(1-O.value)/2}px`),b=$(()=>({strokeDasharray:`${C.value*O.value}px, ${C.value}px`,strokeDashoffset:_.value})),T=$(()=>({strokeDasharray:`${C.value*O.value*(o.percentage/100)}px, ${C.value}px`,strokeDashoffset:_.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),n=$(()=>{let l;return o.color?l=I(o.percentage):l=s[o.status]||s.default,l}),u=$(()=>o.status==="warning"?Lt:o.type==="line"?o.status==="success"?Je:Rt:o.status==="success"?Qe:Ie),t=$(()=>o.type==="line"?12+o.strokeWidth*.4:o.width*.111111+2),y=$(()=>o.format(o.percentage));function c(l){const S=100/l.length;return l.map((B,D)=>Re(B)?{color:B,percentage:(D+1)*S}:B).sort((B,D)=>B.percentage-D.percentage)}const I=l=>{var S;const{color:A}=o;if(xe(A))return A(l);if(Re(A))return A;{const B=c(A);for(const D of B)if(D.percentage>l)return D.color;return(S=B[B.length-1])==null?void 0:S.color}};return(l,S)=>(v(),R("div",{class:p([e(r).b(),e(r).m(l.type),e(r).is(l.status),{[e(r).m("without-text")]:!l.showText,[e(r).m("text-inside")]:l.textInside}]),role:"progressbar","aria-valuenow":l.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[l.type==="line"?(v(),R("div",{key:0,class:p(e(r).b("bar"))},[F("div",{class:p(e(r).be("bar","outer")),style:Z({height:`${l.strokeWidth}px`})},[F("div",{class:p([e(r).be("bar","inner"),{[e(r).bem("bar","inner","indeterminate")]:l.indeterminate},{[e(r).bem("bar","inner","striped")]:l.striped},{[e(r).bem("bar","inner","striped-flow")]:l.stripedFlow}]),style:Z(e(i))},[(l.showText||l.$slots.default)&&l.textInside?(v(),R("div",{key:0,class:p(e(r).be("bar","innerText"))},[P(l.$slots,"default",{percentage:l.percentage},()=>[F("span",null,de(e(y)),1)])],2)):k("v-if",!0)],6)],6)],2)):(v(),R("div",{key:1,class:p(e(r).b("circle")),style:Z({height:`${l.width}px`,width:`${l.width}px`})},[(v(),R("svg",{viewBox:"0 0 100 100"},[F("path",{class:p(e(r).be("circle","track")),d:e(h),stroke:`var(${e(r).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":l.strokeLinecap,"stroke-width":e(f),fill:"none",style:Z(e(b))},null,14,["d","stroke","stroke-linecap","stroke-width"]),F("path",{class:p(e(r).be("circle","path")),d:e(h),stroke:e(n),fill:"none",opacity:l.percentage?1:0,"stroke-linecap":l.strokeLinecap,"stroke-width":e(f),style:Z(e(T))},null,14,["d","stroke","opacity","stroke-linecap","stroke-width"])]))],6)),(l.showText||l.$slots.default)&&!l.textInside?(v(),R("div",{key:2,class:p(e(r).e("text")),style:Z({fontSize:`${e(t)}px`})},[P(l.$slots,"default",{percentage:l.percentage},()=>[l.status?(v(),X(e(j),{key:1},{default:E(()=>[(v(),X(We(e(u))))]),_:1})):(v(),R("span",{key:0},de(e(y)),1))])],6)):k("v-if",!0)],10,["aria-valuenow"]))}});var us=re(is,[["__file","progress.vue"]]);const cs=$e(us),st=Symbol("uploadContextKey"),ds="ElUpload";class fs extends Error{constructor(o,s,r,i){super(o),this.name="UploadAjaxError",this.status=s,this.method=r,this.url=i}}function je(a,o,s){let r;return s.response?r=`${s.response.error||s.response}`:s.responseText?r=`${s.responseText}`:r=`fail to ${o.method} ${a} ${s.status}`,new fs(r,s.status,o.method,a)}function ps(a){const o=a.responseText||a.response;if(!o)return o;try{return JSON.parse(o)}catch{return o}}const vs=a=>{typeof XMLHttpRequest>"u"&&Oe(ds,"XMLHttpRequest is undefined");const o=new XMLHttpRequest,s=a.action;o.upload&&o.upload.addEventListener("progress",f=>{const g=f;g.percent=f.total>0?f.loaded/f.total*100:0,a.onProgress(g)});const r=new FormData;if(a.data)for(const[f,g]of Object.entries(a.data))Fe(g)&&g.length?r.append(f,...g):r.append(f,g);r.append(a.filename,a.file,a.file.name),o.addEventListener("error",()=>{a.onError(je(s,a,o))}),o.addEventListener("load",()=>{if(o.status<200||o.status>=300)return a.onError(je(s,a,o));a.onSuccess(ps(o))}),o.open(a.method,s,!0),a.withCredentials&&"withCredentials"in o&&(o.withCredentials=!0);const i=a.headers||{};if(i instanceof Headers)i.forEach((f,g)=>o.setRequestHeader(g,f));else for(const[f,g]of Object.entries(i))et(g)||o.setRequestHeader(f,String(g));return o.send(r),o},at=["text","picture","picture-card"];let ms=1;const Te=()=>Date.now()+ms++,nt=ae({action:{type:String,default:"#"},headers:{type:w(Object)},method:{type:String,default:"post"},data:{type:w([Object,Function,Promise]),default:()=>ge({})},multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:w(Array),default:()=>ge([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:at,default:"text"},httpRequest:{type:w(Function),default:vs},disabled:Boolean,limit:Number}),gs=ae({...nt,beforeUpload:{type:w(Function),default:M},beforeRemove:{type:w(Function)},onRemove:{type:w(Function),default:M},onChange:{type:w(Function),default:M},onPreview:{type:w(Function),default:M},onSuccess:{type:w(Function),default:M},onProgress:{type:w(Function),default:M},onError:{type:w(Function),default:M},onExceed:{type:w(Function),default:M},crossorigin:{type:w(String)}}),ys=ae({files:{type:w(Array),default:()=>ge([])},disabled:{type:Boolean,default:!1},handlePreview:{type:w(Function),default:M},listType:{type:String,values:at,default:"text"},crossorigin:{type:w(String)}}),hs={remove:a=>!!a},bs=H({name:"ElUploadList"}),ks=H({...bs,props:ys,emits:hs,setup(a,{emit:o}){const s=a,{t:r}=Pe(),i=se("upload"),f=se("icon"),g=se("list"),h=Ce(),C=V(!1),O=$(()=>[i.b("list"),i.bm("list",s.listType),i.is("disabled",s.disabled)]),_=b=>{o("remove",b)};return(b,T)=>(v(),X(It,{tag:"ul",class:p(e(O)),name:e(g).b()},{default:E(()=>[(v(!0),R(he,null,Ze(b.files,(n,u)=>(v(),R("li",{key:n.uid||n.name,class:p([e(i).be("list","item"),e(i).is(n.status),{focusing:C.value}]),tabindex:"0",onKeydown:tt(t=>!e(h)&&_(n),["delete"]),onFocus:t=>C.value=!0,onBlur:t=>C.value=!1,onClick:t=>C.value=!1},[P(b.$slots,"default",{file:n,index:u},()=>[b.listType==="picture"||n.status!=="uploading"&&b.listType==="picture-card"?(v(),R("img",{key:0,class:p(e(i).be("list","item-thumbnail")),src:n.url,crossorigin:b.crossorigin,alt:""},null,10,["src","crossorigin"])):k("v-if",!0),n.status==="uploading"||b.listType!=="picture-card"?(v(),R("div",{key:1,class:p(e(i).be("list","item-info"))},[F("a",{class:p(e(i).be("list","item-name")),onClick:oe(t=>b.handlePreview(n),["prevent"])},[L(e(j),{class:p(e(f).m("document"))},{default:E(()=>[L(e(Tt))]),_:1},8,["class"]),F("span",{class:p(e(i).be("list","item-file-name")),title:n.name},de(n.name),11,["title"])],10,["onClick"]),n.status==="uploading"?(v(),X(e(cs),{key:0,type:b.listType==="picture-card"?"circle":"line","stroke-width":b.listType==="picture-card"?6:2,percentage:Number(n.percentage),style:Z(b.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):k("v-if",!0)],2)):k("v-if",!0),F("label",{class:p(e(i).be("list","item-status-label"))},[b.listType==="text"?(v(),X(e(j),{key:0,class:p([e(f).m("upload-success"),e(f).m("circle-check")])},{default:E(()=>[L(e(Je))]),_:1},8,["class"])):["picture-card","picture"].includes(b.listType)?(v(),X(e(j),{key:1,class:p([e(f).m("upload-success"),e(f).m("check")])},{default:E(()=>[L(e(Qe))]),_:1},8,["class"])):k("v-if",!0)],2),e(h)?k("v-if",!0):(v(),X(e(j),{key:2,class:p(e(f).m("close")),onClick:t=>_(n)},{default:E(()=>[L(e(Ie))]),_:2},1032,["class","onClick"])),k(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),k(" This is a bug which needs to be fixed "),k(" TODO: Fix the incorrect navigation interaction "),e(h)?k("v-if",!0):(v(),R("i",{key:3,class:p(e(f).m("close-tip"))},de(e(r)("el.upload.deleteTip")),3)),b.listType==="picture-card"?(v(),R("span",{key:4,class:p(e(i).be("list","item-actions"))},[F("span",{class:p(e(i).be("list","item-preview")),onClick:t=>b.handlePreview(n)},[L(e(j),{class:p(e(f).m("zoom-in"))},{default:E(()=>[L(e(Ye))]),_:1},8,["class"])],10,["onClick"]),e(h)?k("v-if",!0):(v(),R("span",{key:0,class:p(e(i).be("list","item-delete")),onClick:t=>_(n)},[L(e(j),{class:p(e(f).m("delete"))},{default:E(()=>[L(e(Pt))]),_:1},8,["class"])],10,["onClick"]))],2)):k("v-if",!0)])],42,["onKeydown","onFocus","onBlur","onClick"]))),128)),P(b.$slots,"append")]),_:3},8,["class","name"]))}});var Ve=re(ks,[["__file","upload-list.vue"]]);const ws=ae({disabled:{type:Boolean,default:!1}}),$s={file:a=>Fe(a)},ot="ElUploadDrag",Cs=H({name:ot}),Es=H({...Cs,props:ws,emits:$s,setup(a,{emit:o}){Ft(st)||Oe(ot,"usage: <el-upload><el-upload-dragger /></el-upload>");const r=se("upload"),i=V(!1),f=Ce(),g=C=>{if(f.value)return;i.value=!1,C.stopPropagation();const O=Array.from(C.dataTransfer.files);o("file",O)},h=()=>{f.value||(i.value=!0)};return(C,O)=>(v(),R("div",{class:p([e(r).b("dragger"),e(r).is("dragover",i.value)]),onDrop:oe(g,["prevent"]),onDragover:oe(h,["prevent"]),onDragleave:oe(_=>i.value=!1,["prevent"])},[P(C.$slots,"default")],42,["onDrop","onDragover","onDragleave"]))}});var Ss=re(Es,[["__file","upload-dragger.vue"]]);const Ls=ae({...nt,beforeUpload:{type:w(Function),default:M},onRemove:{type:w(Function),default:M},onStart:{type:w(Function),default:M},onSuccess:{type:w(Function),default:M},onProgress:{type:w(Function),default:M},onError:{type:w(Function),default:M},onExceed:{type:w(Function),default:M}}),Rs=H({name:"ElUploadContent",inheritAttrs:!1}),Ts=H({...Rs,props:Ls,setup(a,{expose:o}){const s=a,r=se("upload"),i=Ce(),f=ke({}),g=ke(),h=t=>{if(t.length===0)return;const{autoUpload:y,limit:c,fileList:I,multiple:l,onStart:S,onExceed:A}=s;if(c&&I.length+t.length>c){A(t,I);return}l||(t=t.slice(0,1));for(const B of t){const D=B;D.uid=Te(),S(D),y&&C(D)}},C=async t=>{if(g.value.value="",!s.beforeUpload)return _(t);let y,c={};try{const l=s.data,S=s.beforeUpload(t);c=Ue(s.data)?Me(s.data):s.data,y=await S,Ue(s.data)&&Ht(l,c)&&(c=Me(s.data))}catch{y=!1}if(y===!1){s.onRemove(t);return}let I=t;y instanceof Blob&&(y instanceof File?I=y:I=new File([y],t.name,{type:t.type})),_(Object.assign(I,{uid:t.uid}),c)},O=async(t,y)=>xe(t)?t(y):t,_=async(t,y)=>{const{headers:c,data:I,method:l,withCredentials:S,name:A,action:B,onProgress:D,onSuccess:ne,onError:G,httpRequest:fe}=s;try{y=await O(y??I,t)}catch{s.onRemove(t);return}const{uid:J}=t,Q={headers:c||{},withCredentials:S,file:t,data:y,method:l,filename:A,action:B,onProgress:q=>{D(q,t)},onSuccess:q=>{ne(q,t),delete f.value[J]},onError:q=>{G(q,t),delete f.value[J]}},x=fe(Q);f.value[J]=x,x instanceof Promise&&x.then(Q.onSuccess,Q.onError)},b=t=>{const y=t.target.files;y&&h(Array.from(y))},T=()=>{i.value||(g.value.value="",g.value.click())},n=()=>{T()};return o({abort:t=>{Ot(f.value).filter(t?([c])=>String(t.uid)===c:()=>!0).forEach(([c,I])=>{I instanceof XMLHttpRequest&&I.abort(),delete f.value[c]})},upload:C}),(t,y)=>(v(),R("div",{class:p([e(r).b(),e(r).m(t.listType),e(r).is("drag",t.drag),e(r).is("disabled",e(i))]),tabindex:e(i)?"-1":"0",onClick:T,onKeydown:tt(oe(n,["self"]),["enter","space"])},[t.drag?(v(),X(Ss,{key:0,disabled:e(i),onFile:h},{default:E(()=>[P(t.$slots,"default")]),_:3},8,["disabled"])):P(t.$slots,"default",{key:1}),F("input",{ref_key:"inputRef",ref:g,class:p(e(r).e("input")),name:t.name,disabled:e(i),multiple:t.multiple,accept:t.accept,type:"file",onChange:b,onClick:oe(()=>{},["stop"])},null,42,["name","disabled","multiple","accept","onClick"])],42,["tabindex","onKeydown"]))}});var Xe=re(Ts,[["__file","upload-content.vue"]]);const He="ElUpload",qe=a=>{var o;(o=a.url)!=null&&o.startsWith("blob:")&&URL.revokeObjectURL(a.url)},Ps=(a,o)=>{const s=_t(a,"fileList",void 0,{passive:!0}),r=n=>s.value.find(u=>u.uid===n.uid);function i(n){var u;(u=o.value)==null||u.abort(n)}function f(n=["ready","uploading","success","fail"]){s.value=s.value.filter(u=>!n.includes(u.status))}function g(n){s.value=s.value.filter(u=>u.uid!==n.uid)}const h=(n,u)=>{const t=r(u);t&&(console.error(n),t.status="fail",g(t),a.onError(n,t,s.value),a.onChange(t,s.value))},C=(n,u)=>{const t=r(u);t&&(a.onProgress(n,t,s.value),t.status="uploading",t.percentage=Math.round(n.percent))},O=(n,u)=>{const t=r(u);t&&(t.status="success",t.response=n,a.onSuccess(n,t,s.value),a.onChange(t,s.value))},_=n=>{et(n.uid)&&(n.uid=Te());const u={name:n.name,percentage:0,status:"ready",size:n.size,raw:n,uid:n.uid};if(a.listType==="picture-card"||a.listType==="picture")try{u.url=URL.createObjectURL(n)}catch(t){Vt(He,t.message),a.onError(t,u,s.value)}s.value=[...s.value,u],a.onChange(u,s.value)},b=async n=>{const u=n instanceof File?r(n):n;u||Oe(He,"file to be removed not found");const t=y=>{i(y),g(y),a.onRemove(y,s.value),qe(y)};a.beforeRemove?await a.beforeRemove(u,s.value)!==!1&&t(u):t(u)};function T(){s.value.filter(({status:n})=>n==="ready").forEach(({raw:n})=>{var u;return n&&((u=o.value)==null?void 0:u.upload(n))})}return ye(()=>a.listType,n=>{n!=="picture-card"&&n!=="picture"||(s.value=s.value.map(u=>{const{raw:t,url:y}=u;if(!y&&t)try{u.url=URL.createObjectURL(t)}catch(c){a.onError(c,u,s.value)}return u}))}),ye(s,n=>{for(const u of n)u.uid||(u.uid=Te()),u.status||(u.status="success")},{immediate:!0,deep:!0}),{uploadFiles:s,abort:i,clearFiles:f,handleError:h,handleProgress:C,handleStart:_,handleSuccess:O,handleRemove:b,submit:T,revokeFileObjectURL:qe}},Is=H({name:"ElUpload"}),Fs=H({...Is,props:gs,setup(a,{expose:o}){const s=a,r=Ce(),i=ke(),{abort:f,submit:g,clearFiles:h,uploadFiles:C,handleStart:O,handleError:_,handleRemove:b,handleSuccess:T,handleProgress:n,revokeFileObjectURL:u}=Ps(s,i),t=$(()=>s.listType==="picture-card"),y=$(()=>({...s,fileList:C.value,onStart:O,onProgress:n,onSuccess:T,onError:_,onRemove:b}));return Nt(()=>{C.value.forEach(u)}),zt(st,{accept:Bt(s,"accept")}),o({abort:f,submit:g,clearFiles:h,handleStart:O,handleRemove:b}),(c,I)=>(v(),R("div",null,[e(t)&&c.showFileList?(v(),X(Ve,{key:0,disabled:e(r),"list-type":c.listType,files:e(C),crossorigin:c.crossorigin,"handle-preview":c.onPreview,onRemove:e(b)},Ae({append:E(()=>[L(Xe,we({ref_key:"uploadRef",ref:i},e(y)),{default:E(()=>[c.$slots.trigger?P(c.$slots,"trigger",{key:0}):k("v-if",!0),!c.$slots.trigger&&c.$slots.default?P(c.$slots,"default",{key:1}):k("v-if",!0)]),_:3},16)]),_:2},[c.$slots.file?{name:"default",fn:E(({file:l,index:S})=>[P(c.$slots,"file",{file:l,index:S})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):k("v-if",!0),!e(t)||e(t)&&!c.showFileList?(v(),X(Xe,we({key:1,ref_key:"uploadRef",ref:i},e(y)),{default:E(()=>[c.$slots.trigger?P(c.$slots,"trigger",{key:0}):k("v-if",!0),!c.$slots.trigger&&c.$slots.default?P(c.$slots,"default",{key:1}):k("v-if",!0)]),_:3},16)):k("v-if",!0),c.$slots.trigger?P(c.$slots,"default",{key:2}):k("v-if",!0),P(c.$slots,"tip"),!e(t)&&c.showFileList?(v(),X(Ve,{key:3,disabled:e(r),"list-type":c.listType,files:e(C),crossorigin:c.crossorigin,"handle-preview":c.onPreview,onRemove:e(b)},Ae({_:2},[c.$slots.file?{name:"default",fn:E(({file:l,index:S})=>[P(c.$slots,"file",{file:l,index:S})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):k("v-if",!0)]))}});var Os=re(Fs,[["__file","upload.vue"]]);const Ms=$e(Os);export{Ms as E,As as a};
